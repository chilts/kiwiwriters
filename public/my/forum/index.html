%# ----------------------------------------------------------------------------
<%init>
    my $model = $ZAAPT->get_model('Forum');
    my $forums = $model->sel_forums_all();
    # get a hash of the forums
    my $h = {};
    foreach my $forum ( @$forums ) {
        $h->{$forum->{f_name}} = $forum;
    }
    $forums = [];
</%init>
%# ----------------------------------------------------------------------------
<h1>Forums</h1>

% if ( $SESS->{_signed_in} ) {
<p class="right">Last Login: <% $SESS->{last} | h %></p>
% }
<p class="right"><& /zaapt/model/forum/widget-stats.mhtml, zaapt => $ZAAPT &></p>

<table>
    <tr class="r0">
        <th colspan="2">Forum</th>
        <th>Topics</th>
        <th>Posts</th>
        <th class="nw">Last Post</th>
    </tr>
<& comp/section.mhtml,
    section => 'Announcements',
    anchor => 'announcements',
    forums => [
        $h->{announcements},
        $h->{achievements},
        $h->{contests},
    ],
    last => $SESS->{last},
&>
<& comp/section.mhtml,
    section => 'General',
    anchor => 'general',
    forums => [
        $h->{general},
        $h->{introductions},
        $h->{'how-do-i'},
        $h->{'help-help'},
        $h->{'resources'},
    ],
    last => $SESS->{last},
&>
<& comp/section.mhtml,
    section => 'Challenges',
    anchor => 'challenges',
    forums => [
        $h->{challenges},
        $h->{wwww},
        $h->{socnoc},
    ],
    last => $SESS->{last},
&>
<& comp/section.mhtml,
    section => 'Write Write Write',
    anchor => 'write-write-write',
    forums => [
        $h->{preparation},
        $h->{'write-it'},
        $h->{editing},
        $h->{'critique-and-review'},
        $h->{submission},
    ],
    last => $SESS->{last},
&>
</table>
%# ----------------------------------------------------------------------------
