%# ----------------------------------------------------------------------------
<%init>
    my $model = $ZAAPT->get_model('Forum');
    my $forums = $model->sel_forum_all();
    # get a hash of the forums
    my $h = {};
    foreach my $forum ( @$forums ) {
        $h->{$forum->{f_name}} = $forum;
    }
    $forums = [];
</%init>
%# ----------------------------------------------------------------------------
<h1>Forums</h1>

<p>
    <strong>Forum Archive</strong> can be read here <a href="challenges-2007.html">2007</a> and <a href="challenges-2008.html">2008</a>.
</p>
<p class="right">
    <& /zaapt/model/forum/widget-stats.mhtml, zaapt => $ZAAPT &>
</p>

<table>
    <tr class="r0">
        <th colspan="2">Forum</th>
        <th>Topics</th>
        <th>Posts</th>
        <th class="nw">Last Post</th>
    </tr>
<& comp/section.mhtml,
    section => 'Announcements',
    anchor => 'announcements',
    forums => [
        $h->{announcements},
        $h->{achievements},
        $h->{contests},
    ],
    last => $SESS->{last},
&>
<& comp/section.mhtml,
    section => 'General',
    anchor => 'general',
    forums => [
        $h->{general},
        $h->{introductions},
        $h->{'how-do-i'},
        $h->{'help-help'},
        $h->{'resources'},
    ],
    last => $SESS->{last},
&>
<& comp/section.mhtml,
    section => 'Challenges',
    anchor => 'challenges',
    forums => [
        $h->{challenges},
        $h->{'submit-a-book-2009'},
        $h->{'new-year-novella-2009'},
        $h->{'collection-challenge-2009'},
        $h->{'wwww-2009'},
        $h->{'zing-thing-2009'},
        $h->{'socnoc-2009'},
        $h->{'the-end-is-nigh-2009'},
    ],
    last => $SESS->{last},
&>
<& comp/section.mhtml,
    section => 'Write Write Write',
    anchor => 'write-write-write',
    forums => [
        $h->{preparation},
        $h->{'write-it'},
        $h->{editing},
        $h->{'critique-and-review'},
        $h->{submission},
    ],
    last => $SESS->{last},
&>
<& comp/section.mhtml,
    section => 'Regional',
    anchor => 'regional',
    forums => [
        $h->{'north-america'},
    ],
    last => $SESS->{last},
&>
</table>
%# ----------------------------------------------------------------------------
