%# ----------------------------------------------------------------------------
<%init>
    # return if $m->cache_self( key => $name, expire_in => '10s' );
</%init>
%# ----------------------------------------------------------------------------
<h1>Create a Challenge</h1>

% if ( $SESS->{_signed_in} ) {

<p>
    As a member of the KiwiWriters site, you are allowed to <a
    href="create.html">create a member challenge</a> so that other member may
    join you in your adventure.
</p>

<p>
    Remember to advertise it on the <a href="/my/forum/challenges/">challenges
    forum</a> if you want others to join you.
</p>

<h1>Member Challenges</h1>

<& /zaapt/model/challenge/user.mhtml,
    %ARGS,
    zaapt => $ZAAPT,
    c_name => 'member',
    page => 'current',
    id => $SESS->{id},
&>

<& /zaapt/model/challenge/user.mhtml,
    %ARGS,
    zaapt => $ZAAPT,
    c_name => 'member',
    page => 'future',
    id => $SESS->{id},
&>

<& /zaapt/model/challenge/user.mhtml,
    %ARGS,
    zaapt => $ZAAPT,
    c_name => 'member',
    page => 'index',
    id => $SESS->{id},
&>

% } else {

<p>
    Please <& /zaapt/common/sign-in-url.mhtml, text => 'sign in' &> first if
    you wish to create a member challenge.
</p>

<h1>Member Challenges</h1>

<& /zaapt/model/challenge/view.mhtml,
    %ARGS,
    zaapt => $ZAAPT,
    c_name => 'member',
    page => 'current',
&>

<& /zaapt/model/challenge/view.mhtml,
    %ARGS,
    zaapt => $ZAAPT,
    c_name => 'member',
    page => 'future',
&>

<& /zaapt/model/challenge/view.mhtml,
    %ARGS,
    zaapt => $ZAAPT,
    c_name => 'member',
    page => 'index',
&>

% }
%# ----------------------------------------------------------------------------
