%# ----------------------------------------------------------------------------
<%args>
    $zaapt
    $a_id
</%args>
%# ----------------------------------------------------------------------------
<%init>
    my $model = $zaapt->get_model("KiwiWriters::Zaapt::Store::Pg::Profile");
    my $profile = $model->sel_profile({ a_id => $a_id });

    unless ( defined $profile ) {
        $m->clear_buffer();
        $m->abort(404);
        return;
    }

    # check that the URL has a http:// in front
    if ( $profile->{p_website} =~ m{ \S }xms and $profile->{p_website} !~ m{ \A http:// }xms ) {
        $profile->{p_website} = "http://$profile->{p_website}";
    }
</%init>
%# ----------------------------------------------------------------------------
<div class="kw_profile">
<h1>Profile</h1>

<&  /zaapt/common/table.mhtml, rows => [
        { field => 'Age', value => $profile->{p_age} || '' },
        { field => 'Location', value => $profile->{p_location} },
        { field => 'Website', value => $profile->{p_website}, type => 'url' },
        { field => 'Favourite Authors', value => $profile->{p_favauthors} },
        { field => 'Favourite Books', value => $profile->{p_favbooks} },
    ]
&>
</div>
%# ----------------------------------------------------------------------------
